<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>852camera ç§Ÿå€Ÿè¨ˆç®—å™¨</title>
  <style>
    :root {
      --primary-color: #2563eb;
      --primary-hover: #1d4ed8;
      --bg-color: #f3f4f6;
      --card-bg: #ffffff;
      --text-main: #1f2937;
      --text-muted: #6b7280;
      --border-color: #e5e7eb;
      --success-color: #10b981;
      --success-hover: #059669;
      --whatsapp-color: #25D366;
      --whatsapp-hover: #128C7E;
      --radius: 16px;
      --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --transition: all 0.2s ease;
    }

    /* Dark Mode Variables */
    [data-theme="dark"] {
      --bg-color: #111827;
      --card-bg: #1f2937;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-color: #374151;
      --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: var(--bg-color);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .container {
      width: 100%;
      max-width: 550px;
      background: var(--card-bg);
      padding: 30px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-top: 20px;
      position: relative;
      transition: background-color 0.3s ease;
    }

    /* Theme Toggle */
    .theme-toggle {
      position: absolute;
      top: 25px;
      right: 25px;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 20px;
      color: var(--text-muted);
      padding: 5px;
      border-radius: 50%;
      width: auto;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .theme-toggle:hover {
      background-color: rgba(0,0,0,0.05);
      color: var(--primary-color);
    }
    [data-theme="dark"] .theme-toggle:hover {
      background-color: rgba(255,255,255,0.1);
    }

    header {
      text-align: center;
      margin-bottom: 25px;
    }

    h2 {
      margin: 0;
      font-size: 24px;
      color: var(--text-main);
      font-weight: 800;
      letter-spacing: -0.5px;
    }

    .subtitle {
      font-size: 14px;
      color: var(--text-muted);
      margin-top: 5px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
      color: var(--text-main);
      opacity: 0.9;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Grid for Dates */
    .date-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    @media (max-width: 480px) {
      .date-row {
        grid-template-columns: 1fr;
      }
    }

    select, input[type="date"] {
      width: 100%;
      padding: 12px 15px;
      font-size: 16px;
      border: 1px solid var(--border-color);
      border-radius: 10px;
      background-color: var(--card-bg);
      transition: var(--transition);
      appearance: none;
      -webkit-appearance: none;
      color: var(--text-main);
    }

    /* Custom Arrow for Select */
    .select-wrapper {
      position: relative;
    }
    .select-wrapper::after {
      content: "â–¼";
      font-size: 10px;
      color: var(--text-muted);
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }

    select:focus, input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
    }

    /* Quick Date Chips */
    .quick-dates {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    
    .chip {
      background: var(--bg-color);
      border: 1px solid var(--border-color);
      color: var(--text-muted);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      user-select: none;
    }

    .chip:hover {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .chip:active {
      transform: scale(0.95);
    }

    /* Action Buttons */
    .btn-group {
      display: grid;
      gap: 10px;
      margin-top: 15px;
    }
    
    .btn-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    button.btn-main {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      color: white;
      background-color: var(--primary-color);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
    }

    button.btn-main:hover {
      background-color: var(--primary-hover);
      transform: translateY(-1px);
    }

    button.btn-main:active {
      transform: translateY(1px);
    }

    .btn-whatsapp {
      background-color: var(--whatsapp-color);
    }
    .btn-whatsapp:hover {
      background-color: var(--whatsapp-hover);
    }

    .btn-copy {
      background-color: var(--bg-color);
      color: var(--text-main);
      border: 1px solid var(--border-color);
    }
    .btn-copy:hover {
      background-color: var(--border-color);
      transform: translateY(-1px);
    }
    
    .btn-link {
      background-color: var(--bg-color);
      color: var(--text-muted);
      border: 1px dashed var(--border-color);
      font-size: 14px;
    }
    .btn-link:hover {
        background-color: var(--border-color);
        color: var(--text-main);
    }

    /* Result Section */
    #result {
      margin-top: 30px;
      border-top: 2px dashed var(--border-color);
      padding-top: 20px;
      display: none;
      animation: fadeIn 0.4s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .result-days {
      font-weight: 600;
      color: var(--text-main);
      font-size: 16px;
    }

    .price-tag {
      font-size: 32px;
      font-weight: 800;
      color: var(--primary-color);
      letter-spacing: -1px;
    }

    .info-card {
      background: var(--bg-color);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 12px;
      display: flex;
      gap: 12px;
      align-items: flex-start;
      border: 1px solid var(--border-color);
    }

    .info-icon {
      font-size: 20px;
      padding-top: 2px;
    }

    .info-content {
      flex: 1;
    }
    
    .info-title {
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 4px;
      font-size: 14px;
    }

    .info-desc {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.4;
    }

    /* Breakdown Toggle */
    .breakdown-section {
      margin: 15px 0;
    }
    
    .breakdown-toggle {
      font-size: 13px;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 8px 0;
    }
    .breakdown-toggle:hover {
      color: var(--primary-color);
    }
    
    .breakdown-list {
      display: none;
      background: var(--bg-color);
      border-radius: 8px;
      padding: 10px;
      margin-top: 5px;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .breakdown-list.open {
      display: block;
    }

    .breakdown-item {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      padding: 6px 0;
      border-bottom: 1px solid var(--border-color);
      color: var(--text-main);
    }
    .breakdown-item:last-child {
      border-bottom: none;
    }
    .badge {
      font-size: 10px;
      background: var(--border-color);
      color: var(--text-muted);
      padding: 2px 6px;
      border-radius: 4px;
      margin-left: 5px;
      text-transform: uppercase;
    }
    
    .badge.holiday {
        background: #fee2e2;
        color: #dc2626;
    }

    .error-msg {
      color: #ef4444;
      background: rgba(239, 68, 68, 0.1);
      padding: 12px;
      border-radius: 8px;
      font-size: 14px;
      text-align: center;
      border: 1px solid rgba(239, 68, 68, 0.2);
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <div class="container">
    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ›æ·±è‰²æ¨¡å¼">
      <span id="theme-icon">ğŸŒ™</span>
    </button>

    <header>
      <h2>ğŸ“· 852camera</h2>
      <div class="subtitle">å°ˆæ¥­æ”å½±å™¨æç§Ÿè³ƒè¨ˆç®—</div>
    </header>

    <div class="form-group">
      <label for="product">é¸æ“‡å™¨æå‹è™Ÿ</label>
      <div class="select-wrapper">
        <select id="product" onchange="calculatePrice()">
          <option value="">-- è«‹é¸æ“‡ --</option>
          <optgroup label="Samsung æ‰‹æ©Ÿ">
            <option value="S24U">Samsung S24U</option>
            <option value="S25U">Samsung S25U</option>
          </optgroup>
          <optgroup label="Vivo æ‰‹æ©Ÿ">
            <option value="X200 Ultra">Vivo X200 Ultra + å°ˆæ¥­æ”å½±å¥—è£</option>
            <option value="X300 Pro">Vivo X300 Pro + å°ˆæ¥­æ”å½±å¥—è£</option>
          </optgroup>
          <optgroup label="Canon ç›¸æ©Ÿ">
            <option value="R5">Canon R5</option>
            <option value="R5ii">Canon R5ii</option>
            <option value="R6ii">Canon R6ii</option>
            <option value="R6iii">Canon R6iii</option>
          </optgroup>
          <optgroup label="Canon é¡é ­">
            <option value="EF 70-200 F2.8 ii">EF 70-200 F2.8 ii</option>
            <option value="RF 70-200 F2.8">RF 70-200 F2.8</option>
            <option value="RF 100-500">RF 100-500</option>
            <option value="RF 100-400">RF 100-400</option>
            <option value="RF 50mm 1.8">RF 50mm 1.8</option>
          </optgroup>
          <optgroup label="Sony ç›¸æ©Ÿ">
            <option value="A7R5">Sony A7R5</option>
            <option value="A7C2">Sony A7C2</option>
          </optgroup>
          <optgroup label="Sony é¡é ­/é…ä»¶">
            <option value="FE 100-400">FE 100-400</option>
            <option value="FE 70-200 F2.8 ii">FE 70-200 F2.8 ii</option>
            <option value="FE 200-600">FE 200-600</option>
            <option value="1.4x Extender">1.4x é æ”å¢è·é¡</option>
          </optgroup>
          <optgroup label="Fujifilm">
            <option value="X100VI">Fujifilm X100VI</option>
          </optgroup>
        </select>
      </div>
    </div>

    <div class="date-row">
      <div class="form-group">
        <label for="startDate">å–æ©Ÿæ—¥æœŸ</label>
        <input type="date" id="startDate" onchange="handleStartDateChange()" />
      </div>
      <div class="form-group">
        <label for="endDate">é‚„æ©Ÿæ—¥æœŸ</label>
        <input type="date" id="endDate" onchange="calculatePrice()" />
        
        <!-- Quick Select Buttons -->
        <div class="quick-dates" id="quickDates" style="display:none;">
          <div class="chip" onclick="setQuickDate(3)">+3æ—¥</div>
          <div class="chip" onclick="setQuickDate(5)">+5æ—¥</div>
          <div class="chip" onclick="setQuickDate(7)">+7æ—¥</div>
        </div>
      </div>
    </div>

    <!-- Error container -->
    <div id="error-box"></div>

    <div id="result">
      <!-- Results injected here -->
    </div>
  </div>

  <script>
    // â¬‡ï¸ é…ç½®ä½ çš„ WhatsApp é›»è©±è™Ÿç¢¼ (ä¸å« + è™Ÿ)
    const WHATSAPP_PHONE = "85257409553"; 
    
    // â¬‡ï¸ å…¬çœ¾å‡æœŸé…ç½® (æ ¼å¼: YYYY-MM-DD) - é€™äº›æ—¥æœŸæœƒè¢«è¦–ç‚º "é€±æœ«/å‡æ—¥åƒ¹"
    const publicHolidays = [
        "2024-12-25", "2024-12-26", "2025-01-01", 
        "2025-01-29", "2025-01-30", "2025-01-31" 
    ];

    const pricingData = {
      "S24U": { deposit: 6000, perDay: 180, weekday1: 160, weekend: { 2: 110, 3: 50, more: 50 }, weekday: { 2: 100, 3: 50, more: 50 } },
      "S25U": { deposit: 8000, perDay: 280, weekday1: 250, weekend: { 2: 170, 3: 80, more: 70 }, weekday: { 2: 150, 3: 70, more: 60 } },
      "X200 Ultra": { deposit: 9000, perDay: 280, weekday1: 250, weekend: { 2: 170, 3: 80, more: 70 }, weekday: { 2: 150, 3: 70, more: 60 } },
      "X300 Pro": { deposit: 9000, perDay: 280, weekday1: 250, weekend: { 2: 170, 3: 80, more: 70 }, weekday: { 2: 150, 3: 70, more: 60 } },
      "R5": { deposit: 16000, perDay: 350, weekday1: 320, weekend: { 2: 210, 3: 110, more: 90 }, weekday: { 2: 190, 3: 100, more: 80 } },
      "R5ii": { deposit: 20000, perDay: 500, weekday1: 450, weekend: { 2: 300, 3: 150, more: 130 }, weekday: { 2: 270, 3: 140, more: 120 } },
      "R6ii": { deposit: 12000, perDay: 300, weekday1: 270, weekend: { 2: 180, 3: 90, more: 80 }, weekday: { 2: 160, 3: 80, more: 70 } },
      "R6iii": { deposit: 18000, perDay: 400, weekday1: 360, weekend: { 2: 240, 3: 120, more: 100 }, weekday: { 2: 220, 3: 110, more: 90 } },
      "EF 70-200 F2.8 ii": { deposit: 8000, perDay: 190, weekday1: 170, weekend: { 2: 110, 3: 60, more: 50 }, weekday: { 2: 100, 3: 50, more: 50 } },
      "RF 70-200 F2.8": { deposit: 14000, perDay: 400, weekday1: 360, weekend: { 2: 240, 3: 120, more: 100 }, weekday: { 2: 220, 3: 110, more: 90 } },
      "RF 100-500": { deposit: 15000, perDay: 400, weekday1: 360, weekend: { 2: 240, 3: 120, more: 100 }, weekday: { 2: 220, 3: 110, more: 90 } },
      "RF 100-400": { deposit: 3000, perDay: 120, weekday1: 110, weekend: { 2: 70, 3: 40, more: 30 }, weekday: { 2: 60, 3: 40, more: 30 } },
      "RF 50mm 1.8": { deposit: 1000, perDay: 50, weekday1: 50, weekend: { 2: 30, 3: 20, more: 10 }, weekday: { 2: 30, 3: 20, more: 10 } },
      "A7R5": { deposit: 18000, perDay: 400, weekday1: 360, weekend: { 2: 240, 3: 120, more: 100 }, weekday: { 2: 220, 3: 110, more: 90 } },
      "A7C2": { deposit: 12000, perDay: 350, weekday1: 320, weekend: { 2: 210, 3: 110, more: 90 }, weekday: { 2: 190, 3: 100, more: 80 } },
      "FE 100-400": { deposit: 12000, perDay: 290, weekday1: 260, weekend: { 2: 170, 3: 90, more: 70 }, weekday: { 2: 150, 3: 80, more: 60 } },
      "FE 70-200 F2.8 ii": { deposit: 13000, perDay: 400, weekday1: 360, weekend: { 2: 240, 3: 120, more: 100 }, weekday: { 2: 220, 3: 110, more: 90 } },
      "FE 200-600": { deposit: 8000, perDay: 230, weekday1: 210, weekend: { 2: 140, 3: 70, more: 60 }, weekday: { 2: 130, 3: 60, more: 50 } },
      "1.4x Extender": { deposit: 2000, perDay: 80, weekday1: 70, weekend: { 2: 50, 3: 20, more: 20 }, weekday: { 2: 50, 3: 20, more: 20 } },
      "X100VI": { deposit: 14000, perDay: 350, weekday1: 320, weekend: { 2: 210, 3: 110, more: 90 }, weekday: { 2: 190, 3: 100, more: 80 } }
    };

    const startInput = document.getElementById("startDate");
    const endInput = document.getElementById("endDate");
    const productSelect = document.getElementById("product");
    const resultDiv = document.getElementById("result");
    const errorBox = document.getElementById("error-box");
    const quickDatesDiv = document.getElementById("quickDates");

    // Init Date Limits
    const today = new Date().toISOString().split("T")[0];
    startInput.min = today;
    endInput.min = today;

    // Check URL Params on Load
    window.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(window.location.search);
        if (params.has('product')) productSelect.value = params.get('product');
        if (params.has('start')) startInput.value = params.get('start');
        if (params.has('end')) endInput.value = params.get('end');
        
        if (startInput.value) handleStartDateChange();
        if (productSelect.value && startInput.value && endInput.value) calculatePrice();
    });

    // Theme Toggle Logic
    function toggleTheme() {
      const body = document.body;
      const currentTheme = body.getAttribute("data-theme");
      const icon = document.getElementById("theme-icon");
      
      if (currentTheme === "dark") {
        body.removeAttribute("data-theme");
        icon.innerText = "ğŸŒ™";
      } else {
        body.setAttribute("data-theme", "dark");
        icon.innerText = "â˜€ï¸";
      }
    }

    // Handle Start Date Change
    function handleStartDateChange() {
      if (!startInput.value) {
        quickDatesDiv.style.display = "none";
        return;
      }
      
      // Show Quick Date buttons
      quickDatesDiv.style.display = "flex";
      
      // Ensure End Date isn't before Start Date
      endInput.min = startInput.value;
      if (endInput.value && endInput.value < startInput.value) {
        endInput.value = startInput.value;
      }
      
      calculatePrice(); // Auto calculate
    }

    // Quick Date Setter
    function setQuickDate(daysToAdd) {
      if (!startInput.value) return;
      
      const date = new Date(startInput.value);
      date.setDate(date.getDate() + daysToAdd);
      
      // Format to YYYY-MM-DD
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      
      endInput.value = `${year}-${month}-${day}`;
      calculatePrice();
    }

    function updateURL() {
        const url = new URL(window.location);
        url.searchParams.set('product', productSelect.value);
        url.searchParams.set('start', startInput.value);
        url.searchParams.set('end', endInput.value);
        // Only push state if we are in a valid environment
        try {
            window.history.replaceState({}, '', url);
        } catch(e) { console.log('History update skipped'); }
    }

    function calculatePrice() {
      const product = productSelect.value;
      const startDateRaw = startInput.value;
      const endDateRaw = endInput.value;
      
      // Update URL for sharing
      updateURL();

      // Reset UI
      errorBox.innerHTML = "";
      
      // Basic Validation
      if (!product || !startDateRaw || !endDateRaw) {
        resultDiv.style.display = "none";
        return;
      }
      
      const startDate = new Date(startDateRaw);
      const endDate = new Date(endDateRaw);

      if (endDate < startDate) {
        errorBox.innerHTML = '<div class="error-msg">âš ï¸ çµæŸæ—¥å¿…é ˆå¤§æ–¼æˆ–ç­‰æ–¼é–‹å§‹æ—¥</div>';
        resultDiv.style.display = "none";
        return;
      }

      let days = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
      if (days === 0) days = 1;

      const data = pricingData[product];
      let total = 0;
      let currentCalcDate = new Date(startDate);
      let breakdownHtml = "";
      
      for (let i = 1; i <= days; i++) {
        currentCalcDate.setDate(currentCalcDate.getDate() + 1);
        const dow = currentCalcDate.getDay(); 
        const dateStrISO = currentCalcDate.toISOString().split('T')[0];
        const isHoliday = publicHolidays.includes(dateStrISO);
        
        let dailyPrice = 0;
        let dayType = "å¹³æ—¥";
        let typeClass = "badge";

        if (i === 1) {
          // If Day 1 is a holiday, it counts as weekend rate but we might want to keep the "Day 1" logic overriding
          // Assuming Holiday logic overrides Weekday1 logic if it falls on Mon-Wed
          // But usually, Day 1 logic is specific. 
          // Logic: If Day 1 is Mon-Wed AND NOT Holiday -> Weekday1 price.
          
          const isDay1Weekday = (dow >= 1 && dow <= 3 && !isHoliday);
          
          dailyPrice = isDay1Weekday ? data.weekday1 : data.perDay;
          dayType = isDay1Weekday ? "é¦–æ—¥ (å¹³æ—¥)" : (isHoliday ? "é¦–æ—¥ (å…¬çœ¾å‡æœŸ)" : "é¦–æ—¥ (å‡æ—¥)");
          if (isHoliday) typeClass = "badge holiday";
        } else {
          const isWeekend = (dow === 0 || dow >= 4 || isHoliday);
          const tier = isWeekend ? data.weekend : data.weekday;
          
          if (isHoliday) {
              dayType = "å…¬çœ¾å‡æœŸ";
              typeClass = "badge holiday";
          } else {
              dayType = isWeekend ? "å‡æ—¥åƒ¹" : "å¹³æ—¥åƒ¹";
          }

          if (i === 2) dailyPrice = tier[2];
          else if (i === 3) dailyPrice = tier[3];
          else dailyPrice = tier.more;
        }
        total += dailyPrice;

        const dateStr = `${currentCalcDate.getMonth()+1}/${currentCalcDate.getDate()}`;
        
        breakdownHtml += `
          <div class="breakdown-item">
            <div>
              <span class="breakdown-date">${dateStr}</span>
              <span class="${typeClass}">${dayType}</span>
            </div>
            <span class="breakdown-price">$${dailyPrice}</span>
          </div>
        `;
      }

      const productName = productSelect.options[productSelect.selectedIndex].text;
      const copyText = `ğŸ“· ç§Ÿå€ŸæŸ¥è©¢\nå™¨æ: ${productName}\næ—¥æœŸ: ${startDateRaw} è‡³ ${endDateRaw}\nå…± ${days} å¤©\nç¸½åƒ¹: $${total}\næŒ‰é‡‘: $${data.deposit}`;
      const whatsappUrl = `https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(copyText)}`;

      // Render Result
      resultDiv.innerHTML = `
        <div class="result-header">
          <div class="result-days">
             ğŸ“… ç§Ÿå€Ÿ ${days} å¤©
             <div style="font-size:12px; font-weight:normal; color:var(--text-muted); margin-top:4px;">å–æ©Ÿæ—¥ä¸è¨ˆè²»</div>
          </div>
          <div class="price-tag">$${total.toLocaleString()}</div>
        </div>
        
        <div class="info-card">
          <div class="info-icon">ğŸ”’</div>
          <div class="info-content">
            <div class="info-title">æŒ‰é‡‘: $${data.deposit.toLocaleString()}</div>
            <div class="info-desc">æ”¯æŒä¿¡ç”¨å¡é æˆæ¬Š (Hold Limit) / FPS / Payme / Alipay</div>
          </div>
        </div>

        <div class="breakdown-section">
           <div class="breakdown-toggle" onclick="toggleBreakdown()">
             <span>ğŸ“‹ æŸ¥çœ‹åƒ¹æ ¼è©³æƒ…</span>
             <span>â–¼</span>
           </div>
           <div class="breakdown-list" id="breakdownList">
              ${breakdownHtml}
           </div>
        </div>

        <div class="info-card" style="border-left: 3px solid var(--primary-color);">
          <div class="info-icon">ğŸ“</div>
          <div class="info-content">
            <div class="info-title">å­¸ç”ŸæŒ‰é‡‘è¨ˆåŠƒ</div>
            <div class="info-desc">
              éœ€æäº¤ï¼š1. èº«ä»½è­‰å‰¯æœ¬ 2. å­¸ç”Ÿè­‰å‰¯æœ¬ 3. æ´»å‹•é–€ç¥¨ (ç§Ÿå€ŸæœŸå…§)
            </div>
          </div>
        </div>

        <div class="btn-group">
          <button class="btn-main btn-whatsapp" onclick="window.open('${whatsappUrl}', '_blank')">
            <span>ğŸ’¬</span> WhatsApp é ç´„
          </button>
          
          <div class="btn-row">
            <button class="btn-main btn-copy" onclick="copyToClipboard(this, \`${copyText.replace(/"/g, '&quot;')}\`)">
                <span>ğŸ“‹</span> è¤‡è£½å…§å®¹
            </button>
            <button class="btn-main btn-link" onclick="copyPageUrl(this)">
                <span>ğŸ”—</span> è¤‡è£½é€£çµ
            </button>
          </div>
        </div>
      `;
      
      resultDiv.style.display = "block";
    }

    function toggleBreakdown() {
      const list = document.getElementById("breakdownList");
      list.classList.toggle("open");
    }

    function copyToClipboard(btn, text) {
      // Create a temporary textarea element to handle the copy
      const textArea = document.createElement("textarea");
      textArea.value = text;
      
      // Ensure it's not visible but part of the DOM to avoid scrolling
      textArea.style.position = "fixed";
      textArea.style.left = "-9999px";
      textArea.style.top = "0";
      document.body.appendChild(textArea);
      
      textArea.focus();
      textArea.select();
      
      try {
        // Execute the copy command
        const successful = document.execCommand('copy');
        if (successful) {
            const originalHtml = btn.innerHTML;
            btn.innerHTML = "<span>âœ…</span> å·²è¤‡è£½ï¼";
            btn.style.borderColor = "var(--success-color)";
            btn.style.color = "var(--success-color)";
            setTimeout(() => {
              btn.innerHTML = originalHtml;
              btn.style.borderColor = "";
              btn.style.color = "";
            }, 2000);
        } else {
             alert("è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•æˆªåœ–");
        }
      } catch (err) {
        console.error('Fallback: Oops, unable to copy', err);
        alert("è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•æˆªåœ–");
      }
      
      // Clean up
      document.body.removeChild(textArea);
    }
    
    function copyPageUrl(btn) {
        const url = window.location.href;
        copyToClipboard(btn, url);
    }
  </script>
</body>
</html>
